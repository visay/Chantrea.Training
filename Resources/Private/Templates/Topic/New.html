{namespace ct=Chantrea\Training\ViewHelpers}
<f:layout name="Default" />

<f:section name="Title"></f:section>
<f:section name="Header"></f:section>

<f:section name="Content">
	<f:if condition="{categories}">
		<f:then>
			<div style="display: none"><ct:flashMessages /></div>
			<f:render partial="FormErrors" arguments="{objectName: objectName}" />
			<p><f:translate id="label.suggest.message.prompt" /></p>
			<f:form action="create" name="newTopic">
				<div class="control-group">
					<div class="control-label">
						<label for="title"><f:translate id="label.field.topic.title" /></label>
					</div>
					<div class="controls">
						<f:form.textfield property="title" id="title" placeholder="{f:translate(id: 'label.placeholder.title')}" />
					</div>
				</div>
				<div class="control-group">
					<div class="control-label">
						<label for="shortDescription">
							<f:translate id="label.field.topic.shortdescription" />
						</label>
					</div>
					<div class="controls">
						<f:form.textarea property="shortDescription" id="shortDescription" rows="3" cols="50" placeholder="{f:translate(id: 'label.placeholder.description')}" />
					</div>
				</div>
				<div class="control-group">
					<div class="control-label">
						<label for="category">
							<f:translate id="label.field.topic.category" />
						</label>
					</div>
					<div class="controls">
						<f:form.select name="category" options="{categories}" optionLabelField="name" property="category" prependOptionLabel="{f:translate(id: 'label.suggest.select.category')}" />
						<f:security.ifHasRole role="Administrator">
							<f:link.action action="new" controller="Category"> <i class="icon-plus"></i></f:link.action>
						</f:security.ifHasRole>
					</div>
				</div>
				<div class="control-group">
					<div class="control-label">
						<label for="type">
							<f:translate id="label.field.topic.type" />
						</label>
					</div>
					<div class="controls">
						<f:form.select name="type" options="{types}" optionLabelField="name" property="type" prependOptionLabel="{f:translate(id: 'label.suggest.select.type')}" />
						<f:security.ifHasRole role="Administrator">
							<f:link.action action="new" controller="Type"> <i class="icon-plus"></i></f:link.action>
						</f:security.ifHasRole>
					</div>
				</div>
				<f:form.hidden property="owner" value="{owner}" />
				<div class="control-group">
					<div class="controls">
						<f:form.button type="submit" class="btn"><f:translate id="label.suggest.save" /></f:form.button>
					</div>
				</div>
			</f:form>
		</f:then>
		<f:else>
			<p>
				<f:translate id="label.suggest.create.category" />
				<f:link.action action="new" controller="Category"><f:translate id="label.create.category" /></f:link.action>
			</p>
		</f:else>
	</f:if>
</f:section>