<f:layout name="Default" />

<f:section name="Title">A list of topics</f:section>
<f:section name="Header"></f:section>

<f:section name="Content">
	<!-- 
	<f:if condition="{topics}">
		<f:then>
			<ul>
				<f:for each="{topics}" as="topic">
					<li>
						<f:link.action action="show" arguments="{topic: topic}">{topic.title}</f:link.action>
						<f:link.action controller="Standard" action="showAccount" arguments="{account: topic.account}">{topic.account.party.name}</f:link.action>
						<f:for each="{topic.account.roles}" as="role">
							{role}
						</f:for> 
						<f:link.action action="edit" arguments="{topic: topic}">Edit</f:link.action>
						<f:link.action action="delete" arguments="{topic: topic}">Delete</f:link.action>
					</li>
				</f:for>
			</ul>
		</f:then>
		<f:else>
			<p>No topics created yet.</p>
		</f:else>
	</f:if>-->
	<f:if condition="{scheduleTopics}">
		<f:then>
			<h4>
				<f:translate id="label.latest.scheduled" />
			</h4>
			<table class="table table-condensed">
				<tr>
					<th><f:translate id="label.field.topic.trainingDate" /></th>
					<th><f:translate id="label.field.topic" /></th>
					<th><f:translate id="label.field.topic.trainer" /></th>
					<th><f:translate id="label.field.topic.location" /></th>
					<f:security.ifHasRole role="Administrator">
						<th><f:translate id="label.edit" /></th>
					</f:security.ifHasRole>
				</tr>
				<f:for each="{scheduleTopics}" as="scheduleTopic">
					<tr>
						<td><f:format.date>{scheduleTopic.trainingDate}</f:format.date></td>
						<td>{scheduleTopic.title}</td>
						<td><f:for each="{scheduleTopic.trainers}" as="trainer">
                                            {trainer.name} <br />
							</f:for></td>
						<td>{scheduleTopic.location.room}</td>
						<f:security.ifHasRole role="Administrator">
							<td><f:link.action action="plan" controller="Topic"
									arguments="{acceptedTopic: scheduleTopic}">
									<i class="icon-edit"></i>
								</f:link.action></td>
						</f:security.ifHasRole>
					</tr>
				</f:for>
			</table>
		</f:then>
		<f:else>
			<f:translate id="label.message.noscheduled" />
		</f:else>
	</f:if>
	<div class="row-fluid">
		<div class="span6">
			<h4>
				<f:translate id="label.latest.suggestion" />
			</h4>
			<f:if condition="{suggestedTopics}">
				<f:then>
					<table class="table table-condensed">
						<tr>
							<th><f:translate id="label.field.topic" /></th>
							<th><f:translate id="label.field.topic.account" /></th>
						</tr>
						<f:for each="{suggestedTopics}" as="suggestedTopic">
							<tr class="warning">
								<td>{suggestedTopic.title}</td>
								<td>{suggestedTopic.account.party.name}</td>
							</tr>
						</f:for>
					</table>
				</f:then>
				<f:else>
					<f:translate id="label.message.nosuggestion" />
				</f:else>
			</f:if>
		</div>
		<div class="span6">
			<h4>
				<f:translate id="label.latest.accpeted" />
			</h4>
			<f:if condition="{acceptedTopics}">
				<f:then>
					<table class="table table-condensed">
						<tr>
							<th><f:translate id="label.field.topic" /></th>
							<th><f:translate id="label.field.topic.account" /></th>
						</tr>
						<f:for each="{acceptedTopics}" as="acceptedTopic">
							<tr class="success">
								<td>{acceptedTopic.title}</td>
								<td>{acceptedTopic.account.party.name}</td>
							</tr>
						</f:for>
					</table>
				</f:then>
				<f:else>
					<f:translate id="label.message.noaccepted" />
				</f:else>
			</f:if>
		</div>
	</div>
	<!-- 
	<p><f:link.action action="new" controller="Category">Create new category</f:link.action></p>
	<p><f:link.action action="new" controller="Trainer">Create new trainer</f:link.action></p>
	<p><f:link.action action="new" controller="Location">Create new location</f:link.action></p> -->
</f:section>